"use strict";(self.webpackChunk_roots_bud_sage=self.webpackChunk_roots_bud_sage||[]).push([[143],{"./styles/app.scss":function(){},"@wordpress/data":function(e){e.exports=window.wp.data},"./scripts/app.js":function(e,t,r){window.jQuery,r("@wordpress/data");window.addEventListener("load",(function(){var e=[].slice.call(document.querySelectorAll(".lazy-background"));if("IntersectionObserver"in window){console.log("test");let t=new IntersectionObserver((function(e,r){e.forEach((function(e){e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))}))}));e.forEach((function(e){t.observe(e)}))}let t=document.querySelector(".nav__right>li.menu-item-has-children>a");console.log("menuItems ",t),t.addEventListener("click",(function(e){console.log(e.target.classList),e.target.classList.contains("focus")?(e.target.classList.remove("focus"),e.target.parentElement.classList.remove("focus")):(e.target.classList.add("focus"),e.target.parentElement.classList.add("focus"))})),t.addEventListener("focus",(function(e){console.log("focus")})),t.addEventListener("blur",(function(e){console.log("blur")}));let r=document.querySelectorAll(".module-mvid__element .overlay"),l=document.querySelectorAll(".module-mvid__element .play-button"),n=document.querySelectorAll(".module-mvid__element .youtube_player");r.forEach(((e,t)=>{e.addEventListener("click",(function(){e.style.display="none",l[t].style.display="none",n[t].style.display="block",n[t].querySelector("iframe").src=n[t].querySelector("iframe").src.replace("autoplay=","autoplay=1").replace("mute=","mute=1").replace("controls=","controls=0")}))})),jQuery(".nav .menu-burger").click((function(){jQuery(this).hasClass("menu-burger--open")?(jQuery("body").removeClass("menu-burger-open"),jQuery(this).removeClass("menu-burger--open"),jQuery("#ml-menu").removeClass("menu--open"),jQuery("#ml-menu-2").removeClass("menu--open"),jQuery(".nav").removeClass("sticky")):(jQuery("body").addClass("menu-burger-open"),jQuery(this).addClass("menu-burger--open"),jQuery("#ml-menu").addClass("menu--open"),jQuery("#ml-menu-2").addClass("menu--open"),jQuery(".nav").addClass("sticky"))}));const c=document.querySelectorAll(".accordion-item");function a(e,t,r){if(document.querySelector(".members-list")){document.querySelector(".members-list").innerHTML="",document.querySelector(".members-list").classList.add("loading");let l="desktop";l=window.innerWidth<768?"mobile":"desktop",jQuery.ajax({url:fchaudronnerie.ajaxurl,method:"POST",dataType:"json",data:{action:"getMembers",page:r,search:t,device:l,categories:e.length>0?e:"all",security:fchaudronnerie.ajax_nonce}}).done((function(e){document.querySelector(".members-list").classList.remove("loading"),document.querySelector(".members-list").innerHTML=e.items,document.querySelector(".total-result-search").innerHTML=e.total_result_message,document.querySelector(".pagination").innerHTML=e.pagination,S()}))}}c.forEach((e=>{const t=e.querySelector(".accordion-header"),r=t.querySelector(".accordion-icon");t.addEventListener("click",(function(){c.forEach((e=>{e!==t.parentElement&&(e.classList.remove("active"),e.querySelector(".accordion-icon").innerHTML='\n          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M6 8H0V6H6V0H8V6H14V8H8V14H6V8Z" fill="#333333" />\n          </svg>\n          ')})),e.classList.toggle("active"),e.classList.contains("active")?r.innerHTML='\n        <svg width="14" height="2" viewBox="0 0 14 2" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M14 0H0V2H14V0Z" fill="#FF5500" />\n        </svg>\n        ':r.innerHTML='\n        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 8H0V6H6V0H8V6H14V8H8V14H6V8Z" fill="#333333" />\n        </svg>\n        \n        '}))}));let o=document.querySelectorAll(".filter-sidebar .filter-item"),i=document.querySelector(".filter-sidebar .link-back"),s=document.querySelector(".filter-sidebar .filter-sidebar__close"),u=document.querySelector(".button-filter-sidebar");function d(){document.querySelector(".filter-sidebar").classList.add("close")}o&&o.forEach((e=>{e.addEventListener("click",(e=>function(e){let t=document.querySelector(".filter-sidebar .layer-2"),r=document.querySelector(".filter-sidebar .layer-1");if(!e.target.classList.contains("disable")){t.classList.add("active"),r.classList.remove("active");let l=e.target.getAttribute("data-id"),n=document.querySelector(".filter-"+l);n&&n.classList.add("active")}}(e)))})),i&&i.addEventListener("click",(e=>function(){let e=document.querySelector(".filter-sidebar .layer-2"),t=document.querySelector(".filter-sidebar .layer-1"),r=document.querySelector(".filter-nav.active");r&&r.classList.remove("active");e.classList.remove("active"),t.classList.add("active")}())),s&&s.addEventListener("click",(e=>d())),u&&u.addEventListener("click",(e=>{document.querySelector(".filter-sidebar").classList.remove("close")}));let m=document.querySelectorAll(".filter-category"),y=new URL(window.location.href),f={},v=[],p=document.querySelector(".search-form"),g="",L=1;function S(){let e=document.querySelectorAll(".pagination-members a");e.forEach((t=>{t.addEventListener("click",(function(r){r.preventDefault(),e.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),L=t.getAttribute("data-page"),y.searchParams.append("page",L),a(v,g,L)}))}))}a(v,g,L),m.forEach((e=>{e.querySelector("select")&&e.querySelector("select").addEventListener("change",(function(){L=1;let t=e.querySelector("select").value,r=e.querySelector("select").getAttribute("name");f[r]=t,"all"===t&&delete f[r],v=Object.values(f),y.searchParams.append("categories",v),a(v,g,L)}))})),p&&p.addEventListener("submit",(function(e){e.preventDefault(),L=1,g=p.querySelector("input").value,y.searchParams.append("search",g),a(v,g,L)}));var q=0;window.addEventListener("scroll",(function(){window.scrollY>200?(document.body.getBoundingClientRect().top>q?(document.querySelector(".nav").classList.remove("opacity"),document.querySelector(".nav").classList.add("sticky")):(document.querySelector(".nav").classList.add("opacity"),document.querySelector(".nav").classList.remove("sticky")),q=document.body.getBoundingClientRect().top):(document.querySelector(".nav").classList.remove("opacity"),document.querySelector(".nav").classList.remove("sticky"))}));let E=document.querySelectorAll(".layer-2 .filter-item"),h=document.querySelectorAll(".filter-item .close"),b=[];E.forEach((e=>{e.classList.contains("disable")||e.addEventListener("click",(function(t){if(!t.target.classList.contains("close")){let t=e.getAttribute("data-value");b.includes(t)||b.push(t),b.includes(t)&&e.classList.add("active")}}))})),h&&h.forEach((e=>{e.addEventListener("click",(function(t){let r=e.parentElement.getAttribute("data-value");e.parentElement.classList.remove("active");let l=b.indexOf(r);b[l]&&b.splice(l,1)}))}));let A=document.querySelector(".apply-filter");function k(){a(b,g,1),d()}A&&A.addEventListener("click",(e=>k()));let w=document.querySelector(".erase-filter");w&&w.addEventListener("click",(e=>function(){b=[];let e=document.querySelectorAll(".filter-sidebar .filter-item.active");document.querySelector('.filter-item[data-id="speciality"]').classList.add("disable"),e.forEach((e=>{console.log(e),e.classList.remove("active")})),a(b,g,1),d()}()));let H=document.querySelectorAll(".filter-item span"),j=document.querySelectorAll(".filter-item .close"),T=[],x=1;function M(){let e=document.querySelectorAll(".pagination-actus a");e.forEach((t=>{t.addEventListener("click",(function(r){r.preventDefault(),e.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),x=t.getAttribute("data-page"),y.searchParams.append("page",L),_(T,x)}))}))}function _(e,t){if(document.querySelector(".posts-list")){let r=[];document.querySelectorAll(".filter-item").forEach((e=>r.push(e.getAttribute("data-categoryid")))),document.querySelector(".posts-list").innerHTML="",document.querySelector(".posts-list").classList.add("loading"),jQuery.ajax({url:fchaudronnerie.ajaxurl,method:"POST",dataType:"json",data:{action:"getPosts",page:t,defaultCategory:r,categories:e.length>0?e:"all",security:fchaudronnerie.ajax_nonce}}).done((function(e){document.querySelector(".posts-list").classList.remove("error"),document.querySelector(".posts-list").classList.remove("loading"),document.querySelector(".posts-list").innerHTML=e.items,document.querySelector(".pagination").innerHTML=e.pagination,M()})).catch((e=>{document.querySelector(".posts-list").classList.remove("loading"),document.querySelector(".posts-list").classList.add("error");let t=document.createElement("div").innerHTML="Une erreur est survenue";const r=document.createElement("button");r.innerText="R\xe9essayer",r.classList.add("try-again"),r.addEventListener("click",(function(){_(T,x)})),document.querySelector(".posts-list").append(t),document.querySelector(".posts-list").append(r)}))}}_(T,x),H.forEach((e=>{e.addEventListener("click",(function(t){L=1;let r=e.parentNode.getAttribute("data-categoryid");T.includes(r)||T.push(r),T.includes(r)&&e.parentNode.classList.add("active"),_(T,x)}))})),j.forEach((e=>{e.addEventListener("click",(function(t){let r=e.parentNode.getAttribute("data-categoryid");T=T.filter((function(e){return e!=r})),e.parentNode.classList.remove("active"),_(T,x)}))}));let Q=document.querySelectorAll(".filter-category .select-values"),C=document.querySelectorAll(".filter-category .select-option"),O=document.querySelectorAll(".filter-category .select-actions .close"),V=document.querySelectorAll(".filter-category .select-option-remove"),P=document.querySelectorAll(".filter-category .select-actions .arrow"),B=(document.querySelectorAll(".filter-category .select-actions .close"),!1);function I(e){let t=e.target.parentElement.parentElement.parentElement;e.target.parentElement.classList.remove("selected");let r=e.target.parentElement.getAttribute("data-value");0==t.querySelectorAll(".select-option.selected").length&&(t.querySelector(".select-values").innerHTML=t.querySelector(".select-option.default").innerHTML),-1!=v.indexOf(r)&&(v.splice(v.indexOf(r),1),0==v.length&&(v=[]),a(v,g,L))}function N(e){let t=e.target.parentElement.parentElement;if(!e.target.classList.contains("select-option-remove")){e.target.classList.add("selected");let r=e.target.getAttribute("data-value");t.querySelectorAll(".select-option.selected").length>1?(t.querySelector(".select-values").innerHTML=`${t.querySelector(".select-option.selected").getAttribute("data-name")},...`,t.classList.add("filter-active")):t.querySelector(".select-option.selected")&&(t.querySelector(".select-values").innerHTML=t.querySelector(".select-option.selected").getAttribute("data-name"),t.classList.add("filter-active")),-1==v.indexOf(r)&&(v.push(r),a(v,g,L))}}P.forEach((e=>{e.addEventListener("click",(e=>{e.target.parentElement.parentElement.classList.toggle("active")}))})),Q&&(Q.forEach((e=>{e.addEventListener("click",(e=>function(e){let t=e.target;B=t.parentElement,Q.forEach((e=>{e.parentElement!=t.parentElement&&e.parentElement.classList.remove("active")})),e.target.parentElement.classList.contains("disable")||e.target.parentElement.classList.toggle("active")}(e))),e.parentElement.querySelector(".select-overlay").addEventListener("click",(t=>{e.parentElement.classList.remove("active")})),function(e){let t=e.querySelector("input");if(t){let t=e.querySelector(".select-option.default");e.querySelector(".select-values").innerHTML=t.innerHTML}}(e.parentElement)})),document.addEventListener("click",(function(e){B&&(function(e,t){let r=t;for(;null!=r;){if(r==e)return!0;r=r.parentNode}return!1}(B,e.target)||B.classList.contains("active")&&(B.classList.remove("active"),B=!1))}))),V&&V.forEach((e=>{e.addEventListener("click",(e=>I(e)))})),C&&C.forEach((e=>{e.addEventListener("click",(e=>N(e)))})),O&&O.forEach((e=>{e.addEventListener("click",(t=>{let r=e.parentElement.parentElement,l=r.querySelector(".select-option.default");r.querySelector(".select-values").innerHTML=l.innerHTML,r.querySelectorAll(".select-option.selected").forEach((e=>{v.splice(v.indexOf(e.getAttribute("data-value")),1),e.classList.remove("selected")})),r.classList.remove("filter-active"),a(v,g,L)}))}));document.querySelectorAll('.select[name="activites"] .select-option').forEach((e=>{e.addEventListener("click",(function(e){jQuery.ajax({url:fchaudronnerie.ajaxurl,method:"POST",dataType:"json",data:{action:"getSelectOptions",taxonomy:e.target.getAttribute("data-value"),security:fchaudronnerie.ajax_nonce}}).done((function(e){const t=document.querySelector('.select[name="speciality"] .select-list');if(e.total>0){t.innerHTML=e.options,document.querySelector('.select[name="speciality"]').classList.remove("disable");let r=document.querySelectorAll(".filter-category .select-option");r&&r.forEach((e=>{e.addEventListener("click",(e=>N(e)))}));let l=document.querySelectorAll(".filter-category .select-option-remove");l&&l.forEach((e=>{e.addEventListener("click",(e=>I(e)))}));let n=t.querySelector(".select-option.default");t.parentElement.querySelector(".select-values").innerHTML=n.innerHTML}else document.querySelector('.select[name="speciality"]').classList.add("disable")}))}))}));[...document.querySelectorAll(".filter-item")].filter((e=>"activites"==e.getAttribute("data-parent"))).forEach((e=>{e.addEventListener("click",(function(e){jQuery.ajax({url:fchaudronnerie.ajaxurl,method:"POST",dataType:"json",data:{action:"getFilterOptions",taxonomy:e.target.getAttribute("data-value"),security:fchaudronnerie.ajax_nonce}}).done((function(e){const t=document.querySelector(".filter-nav.filter-speciality");if(e.total>0){document.querySelector('.filter-item[data-id="speciality"]').classList.remove("disable"),t.innerHTML=e.options,document.querySelectorAll(".layer-2 .filter-item").forEach((e=>{e.addEventListener("click",(function(t){if(!t.target.classList.contains("close")){let t=e.getAttribute("data-value");b.includes(t)||b.push(t),b.includes(t)&&e.classList.add("active")}}))})),h&&h.forEach((e=>{e.addEventListener("click",(function(t){let r=e.parentElement.getAttribute("data-value");e.parentElement.classList.remove("active");let l=b.indexOf(r);b[l]&&b.splice(l,1)}))}));let r=document.querySelector(".apply-filter");r?r.addEventListener("click",(e=>k())):document.querySelector('.filter-item[data-id="speciality"]').classList.add("disable")}document.querySelectorAll(".filter-item .close").forEach((e=>{e.addEventListener("click",(function(t){let r=e.parentNode.getAttribute("data-categoryid");T=T.filter((function(e){return e!=r})),e.parentNode.classList.remove("active"),_(T,x)}))}))}))}))}));let R=document.querySelectorAll(".region");R.forEach((e=>{e.addEventListener("click",(function(t){let r=e.getAttribute("data-region"),l=document.getElementById(r);console.log(l),R.forEach((e=>{if(e.getAttribute("data-region")!=r){let t=document.getElementById(e.getAttribute("data-region"));t&&t.classList.remove("active")}})),l&&(l.classList.add("active"),l.scrollIntoView({behavior:"smooth",block:"start",inline:"center"}))}))}))}))}},function(e){var t=function(t){return e(e.s=t)};t("./scripts/app.js"),t("./styles/app.scss")}]);